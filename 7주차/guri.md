# 1. 동기식 렌더링의 문제

- 메인 스레드를 가로막아 사용자 경험이 저하됨
- 컴포넌트가 많고 업데이트가 빈번하며 복잡한 애플리케이션에서 더 문제가 됨.
- UI반응이 느려지거나 응답을 하지 않아 사용자 불편
    
    ⇒ 여러 업데이트를 일괄 처리
    
- 리액트는 동시성 렌더링을 사용해 작업의 우선순위를 정하고 중요한 업데이트가 가로막히지 않게 함.
- CPU를 많이 소모하는 렌더링 작업은 덜 중요한 작업으로 간주하고 사용자 상호작용이나 애니메이션 같은 작업을 우선적으로 처리함
- 타임 슬라이싱 : 렌더링 프로세스를 작은 덩어리로 분할해 점진적으로 처리하는 기법

# 2. 파이버 다시 보기

- 파이버 재조정자 : 동시성 렌더링을 가능하게 하는 리액트의 핵심 메커니즘
- UI가 크고 복잡한 리액트 애플리케이션의 응답성과 성능을 개선하는 것이 주 목표
- 재조정자는 렌더링 프로세스를 파이버라고 하는 작고 관리하기 쉬운 작업 단위로 분할
- 파이버를 활용해 렌더링 작업을 일시 중지하거나 재개하거나 우선순위를 설정해 업데이트를 지연하거나 예약함.

# 3. 업데이트 예약과 지연

- 스케줄러 : 해야할 업데이트 작업이 있을 때 setTimeout, MessageChannel등의 브라우저 API를 사용해 작업을 예약, 관리하는 시스템

# 4. 더 깊이 들어가기

## 4.1 스케줄러

- 타이밍 관련 유틸리티를 제공하는 독립형 패키지. 파이버 재조정자와는 별개로 동작
- 재조정자 내에서 이 스케줄러를 사용함
- 렌더 레인을 통해 작업의 우선순위를 정하고 정리해 여러 작업이 협력하도록 함.
- 마이크로태스크를 예약해서 메인 스레드의 제어를 관리하고 원활한 실행을 보장하는 것.
- 마이크로태스크 : 현재 스크립트 실행 직후에 브라우저가 렌더링이나 이벤트 처리 같은 작업을 수행하기 전에 루트 스케줄의 처리가 높은 우선순위로 이루어지도록 하기 위해 사용.
- ensureRootIsScheduled는 리액트 루트에 대한 업데이트를 효율적으로 관리하고 작업과 마이크로 태스크를 예약해 원활한 렌더링을 보장.

# 5. 렌더 레인

- 리액트의 예약 시스템에서 중요한 요소, 우선순위 수준을 나타내는 단위임
- 리액트가 렌더링 주기에서 처리할 수 있는 작업을 의미

## 5.1 렌더 레인 작동 방식

- 컴포넌트가 업데이트 되거나 새 컴포넌트가 렌더 트리에 추가되면 리액트는 우선순위에 따라 레인을 할당함.
- 업데이트를 예약하고 우선순위를 정하는 과정
    1. 업데이트 수집
    2. 레인 처리
    3. 커밋 단계
    4. 반복
- 우선순위를 결정하고 적절한 레인에 할당하는 과정
    1. 업데이트의 콘텍스트 확인
    2. 콘텍스트에 따라 우선순위 추정
    3. 우선순위 재정의가 있는지 확인
    4. 올바른 레인에 업데이트 할당

## 5.3 커밋 단계

- 모든 업데이트를 각 레인에 처리한 후, 커밋 단계로 진입해 변경 사항을 DOM에 적용하고 부작용을 실행하며 그 외 마무리 작업을 수행함.
- 리액트가 업데이트 문제, 우선순위 설정, 순서관리 등의 작업을 자동으로 처리하기 때문에 개발자는 애플리케이션 자체에 집중할 수 있음.

# 6. useTransition

- 컴포넌트에서 상태 업데이트의 우선순위를 관리하고 우선순위 높은 업데이트에 의해 UI가 응답하지 않는 것을 방지하는 리액트 훅
- 시각적으로 혼란을 줄 수 있는 업데이트를 처리할때 사용
- 함수 컴포넌트 내에서만 사용할 수 있음.
- isPending, startTransition이 포함된 배열을 반환함
